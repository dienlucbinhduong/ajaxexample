@*@using WebDangVien.Controllers;
@using DVModels.EF;
@model List<DVModels.DATAVIEW.DangVien>
@{
    List<Division> lst = new List<Division>();
    lst = ViewBag.lstChiBo;
    Layout = "~/Views/Shared/_DVLayout.cshtml";
    HomeController v = new HomeController();
}*@
@{
    ViewBag.Title = "Chart";
    Layout = "~/Views/Shared/_DVLayout.cshtml";
}

<h2>Chart</h2>
<div class="row">
    
        <!-- DONUT CHART -->
    
        <div class="col-md-6">
            <div class="box box-danger">
                <div class="box-header with-border">
                    <h3 class="box-title">Số lượng Đảng viên của từng Chi bộ</h3>
                    @*<h3 class="box-title">@ViewBag.PieChart</h3>*@

                    <div class="box-tools pull-right">
                        <button type="button" class="btn btn-box-tool" data-widget="collapse">
                            <i class="fa fa-minus"></i>
                        </button>
                        <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                    </div>
                </div>
                <div class="box-body">
                    <canvas id="pieChart" style="height: 150px; width: 365px;" height="150" width="365"></canvas>
                </div>
                <!-- /.box-body -->
            </div>
        </div>

        
        <div class="col-md-6">
            <div class="box">
                <div class="box-header">
                    <h3 class="box-title">Ghi chú</h3>
                </div>
                <!-- /.box-header -->
                <div class="box-body no-padding">
                    <table class="table table-condensed">
                        <tbody>
                            <tr>
                                <th style="width: 10px">TT</th>
                                <th>Tên Chi bộ</th>
                                <th>Số lượng</th>
                                <th style="width: 40px">Tỉ lệ</th>
                            </tr>  
                            <tr>
                                <td>1.</td>
                                <td>Công nghệ thông tin</td>
                                <td>
                                    <div class="progress progress-xs">
                                        <div class="progress-bar progress-bar-danger" style="width: 55%"></div>
                                    </div>
                                </td>
                                <td><span class="badge bg-red">55%</span></td>
                            </tr>                          
                        </tbody>
                    </table>
                </div>
                <!-- /.box-body -->
            </div>
        </div>
     

        <!-- BAR CHART -->
    <div class="col-md-12">
        <div class="box box-success">
            <div class="box-header with-border">
                <h3 class="box-title">Phát triển Đảng viên qua từng năm</h3>

                <div class="box-tools pull-right">
                    <button type="button" class="btn btn-box-tool" data-widget="collapse">
                        <i class="fa fa-minus"></i>
                    </button>
                    <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                </div>
            </div>
            <div class="box-body">
                <div class="chart">
                    <canvas id="barChart" style="height:230px"></canvas>
                </div>
            </div>
            <!-- /.box-body -->
        </div>
        <!-- /.box -->
    </div>
  
    </div>
        <!-- jQuery 2.2.3 -->
        <script src="/Assets/plugins/jQuery/jquery-2.2.3.min.js"></script>
        <!-- Bootstrap 3.3.6 -->
        <script src="/Assets/bootstrap/js/bootstrap.min.js"></script>
        <!-- ChartJS 1.0.1 -->
        <script src="/Assets/plugins/chartjs/Chart.min.js"></script>
        <!-- FastClick -->
        <script src="/Assets/plugins/fastclick/fastclick.js"></script>
        <!-- AdminLTE App -->
        <script src="/Assets/dist/js/app.min.js"></script>
        <!-- AdminLTE for demo purposes -->
        <script src="/Assets/dist/js/demo.js"></script>
        <!-- page script -->
        <script>
            $(function () {
                /* ChartJS
                 * -------
                 * Here we will create a few charts using ChartJS
                 */
                var areaChartData = {
                    labels: ["January", "February", "March", "April", "May", "June", "July", "January", "February", "March", "April", "May", "June", "July"],
                    datasets: [
                      {
                          label: "Electronics",
                          fillColor: "rgba(210, 214, 222, 1)",
                          strokeColor: "rgba(210, 214, 222, 1)",
                          pointColor: "rgba(210, 214, 222, 1)",
                          pointStrokeColor: "#c1c7d1",
                          pointHighlightFill: "#fff",
                          pointHighlightStroke: "rgba(220,220,220,1)",
                          data: [65, 59, 80, 81, 56, 55, 40, 20, 30, 40]
                      }
                      ,
                      {
                          label: "Digital Goods",
                          fillColor: "rgba(60,141,188,0.9)",
                          strokeColor: "rgba(60,141,188,0.8)",
                          pointColor: "#3b8bba",
                          pointStrokeColor: "rgba(60,141,188,1)",
                          pointHighlightFill: "#fff",
                          pointHighlightStroke: "rgba(60,141,188,1)",
                          data: [28, 48, 40, 19, 86, 27, 90]
                      },
                      {
                          label: "Digital Goods",
                          fillColor: "rgba(60,141,188,0.9)",
                          strokeColor: "rgba(60,141,188,0.8)",
                          pointColor: "#3b8bba",
                          pointStrokeColor: "rgba(60,141,188,1)",
                          pointHighlightFill: "#fff",
                          pointHighlightStroke: "rgba(60,141,188,1)",
                          data: [28, 48, 40, 19, 86, 27, 90]
                      },
                      {
                          label: "Digital Goods",
                          fillColor: "rgba(60,141,188,0.9)",
                          strokeColor: "rgba(60,141,188,0.8)",
                          pointColor: "#3b8bba",
                          pointStrokeColor: "rgba(60,141,188,1)",
                          pointHighlightFill: "#fff",
                          pointHighlightStroke: "rgba(60,141,188,1)",
                          data: [28, 48, 40, 19, 86, 27, 90]
                      },
                      {
                          label: "Digital Goods",
                          fillColor: "rgba(60,141,188,0.9)",
                          strokeColor: "rgba(60,141,188,0.8)",
                          pointColor: "#3b8bba",
                          pointStrokeColor: "rgba(60,141,188,1)",
                          pointHighlightFill: "#fff",
                          pointHighlightStroke: "rgba(60,141,188,1)",
                          data: [28, 48, 40, 19, 86, 27, 90]
                      },
                      {
                          label: "Digital Goods",
                          fillColor: "rgba(60,141,188,0.9)",
                          strokeColor: "rgba(60,141,188,0.8)",
                          pointColor: "#3b8bba",
                          pointStrokeColor: "rgba(60,141,188,1)",
                          pointHighlightFill: "#fff",
                          pointHighlightStroke: "rgba(60,141,188,1)",
                          data: [28, 48, 40, 19, 86, 27, 90]
                      },
                      {
                          label: "Digital Goods",
                          fillColor: "rgba(60,141,188,0.9)",
                          strokeColor: "rgba(60,141,188,0.8)",
                          pointColor: "#3b8bba",
                          pointStrokeColor: "rgba(60,141,188,1)",
                          pointHighlightFill: "#fff",
                          pointHighlightStroke: "rgba(60,141,188,1)",
                          data: [28, 48, 40, 19, 86, 27, 90]
                      },
                      {
                          label: "Digital Goods",
                          fillColor: "rgba(60,141,188,0.9)",
                          strokeColor: "rgba(60,141,188,0.8)",
                          pointColor: "#3b8bba",
                          pointStrokeColor: "rgba(60,141,188,1)",
                          pointHighlightFill: "#fff",
                          pointHighlightStroke: "rgba(60,141,188,1)",
                          data: [28, 48, 40, 19, 86, 27, 90]
                      },
                      {
                          label: "Digital Goods",
                          fillColor: "rgba(60,141,188,0.9)",
                          strokeColor: "rgba(60,141,188,0.8)",
                          pointColor: "#3b8bba",
                          pointStrokeColor: "rgba(60,141,188,1)",
                          pointHighlightFill: "#fff",
                          pointHighlightStroke: "rgba(60,141,188,1)",
                          data: [28, 48, 40, 19, 86, 27, 90]
                      },
                      {
                          label: "Digital Goods",
                          fillColor: "rgba(60,141,188,0.9)",
                          strokeColor: "rgba(60,141,188,0.8)",
                          pointColor: "#3b8bba",
                          pointStrokeColor: "rgba(60,141,188,1)",
                          pointHighlightFill: "#fff",
                          pointHighlightStroke: "rgba(60,141,188,1)",
                          data: [28, 48, 40, 19, 86, 27, 90]
                      },
                      {
                          label: "Digital Goods",
                          fillColor: "rgba(60,141,188,0.9)",
                          strokeColor: "rgba(60,141,188,0.8)",
                          pointColor: "#3b8bba",
                          pointStrokeColor: "rgba(60,141,188,1)",
                          pointHighlightFill: "#fff",
                          pointHighlightStroke: "rgba(60,141,188,1)",
                          data: [28, 48, 40, 19, 86, 27, 90]
                      }
                    ]
                };

                //-------------
                //- PIE CHART -
                //-------------
                // Get context with jQuery - using jQuery's .get() method.
                var pieChartCanvas = $("#pieChart").get(0).getContext("2d");
                var pieChart = new Chart(pieChartCanvas);

                var DVData = @Html.Raw(ViewBag.PieChart); //Dữ liệu truyền từ Controller
               // alert(DVData);
                
                
                var PieData = [{value: 700,color: "#f56954",highlight: "#f56954",label: "Chrome"} ]; //Dữ liệu mẫu JSON


                var pieOptions = {
                    //Boolean - Whether we should show a stroke on each segment
                    segmentShowStroke: true,
                    //String - The colour of each segment stroke
                    segmentStrokeColor: "#fff",
                    //Number - The width of each segment stroke
                    segmentStrokeWidth: 2,
                    //Number - The percentage of the chart that we cut out of the middle
                    percentageInnerCutout: 50, // This is 0 for Pie charts
                    //Number - Amount of animation steps
                    animationSteps: 100,
                    //String - Animation easing effect
                    animationEasing: "easeOutBounce",
                    //Boolean - Whether we animate the rotation of the Doughnut
                    animateRotate: true,
                    //Boolean - Whether we animate scaling the Doughnut from the centre
                    animateScale: false,
                    //Boolean - whether to make the chart responsive to window resizing
                    responsive: true,
                    // Boolean - whether to maintain the starting aspect ratio or not when responsive, if set to false, will take up entire container
                    maintainAspectRatio: true,
                    //String - A legend template
                    legendTemplate: "<ul class=\"<%=name.toLowerCase()%>-legend\"><% for (var i=0; i<segments.length; i++){%><li><span style=\"background-color:<%=segments[i].fillColor%>\"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>"
                };
                //Create pie or douhnut chart
                // You can switch between pie and douhnut using the method below.
                pieChart.Doughnut(DVData, pieOptions);

                //-------------
                //- BAR CHART -
                //-------------
                var barChartCanvas = $("#barChart").get(0).getContext("2d");
                var barChart = new Chart(barChartCanvas);
                var barChartData = areaChartData;
                barChartData.datasets[1].fillColor = "#00a65a";
                barChartData.datasets[1].strokeColor = "#00a65a";
                barChartData.datasets[1].pointColor = "#00a65a";
                var barChartOptions = {
                    //Boolean - Whether the scale should start at zero, or an order of magnitude down from the lowest value
                    scaleBeginAtZero: true,
                    //Boolean - Whether grid lines are shown across the chart
                    scaleShowGridLines: true,
                    //String - Colour of the grid lines
                    scaleGridLineColor: "rgba(0,0,0,.05)",
                    //Number - Width of the grid lines
                    scaleGridLineWidth: 1,
                    //Boolean - Whether to show horizontal lines (except X axis)
                    scaleShowHorizontalLines: true,
                    //Boolean - Whether to show vertical lines (except Y axis)
                    scaleShowVerticalLines: true,
                    //Boolean - If there is a stroke on each bar
                    barShowStroke: true,
                    //Number - Pixel width of the bar stroke
                    barStrokeWidth: 2,
                    //Number - Spacing between each of the X value sets
                    barValueSpacing: 5,
                    //Number - Spacing between data sets within X values
                    barDatasetSpacing: 1,
                    //String - A legend template
                    legendTemplate: "<ul class=\"<%=name.toLowerCase()%>-legend\"><% for (var i=0; i<datasets.length; i++){%><li><span style=\"background-color:<%=datasets[i].fillColor%>\"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>",
                    //Boolean - whether to make the chart responsive
                    responsive: true,
                    maintainAspectRatio: true
                };

                barChartOptions.datasetFill = false;
                barChart.Bar(barChartData, barChartOptions);
            });
        </script>
